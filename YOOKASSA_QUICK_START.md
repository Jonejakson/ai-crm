# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆKassa –¥–ª—è —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ–≥–æ

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–∫—Ä–∞—Ç–∫–æ)

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ÆKassa
- –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://yookassa.ru
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∫–∞–∫ **—Å–∞–º–æ–∑–∞–Ω—è—Ç—ã–π**
- –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é (1-3 –¥–Ω—è)

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π
- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **API**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
  - **Shop ID** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456`)
  - **Secret Key** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `live_xxxxxxxx...`)

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@79.143.30.96

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç
cd /opt/flamecrm

# –û—Ç–∫—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```env
YOOKASSA_SHOP_ID=–≤–∞—à_shop_id
YOOKASSA_SECRET_KEY=live_–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
NEXTAUTH_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.ru
DEV_MODE=false
NODE_ENV=production
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+O, Enter, Ctrl+X) –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
docker-compose restart app
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook

1. –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ÆKassa ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
2. –î–æ–±–∞–≤—å—Ç–µ URL: `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/api/billing/webhook`
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è: `payment.succeeded`, `payment.canceled`

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã:**
- –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞: `5555 5555 5555 4444` (–ª—é–±–∞—è –¥–∞—Ç–∞, –ª—é–±–æ–π CVV)
- –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω–∞—è: `5555 5555 5555 4477`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ó–∞–π–¥–∏—Ç–µ –≤ CRM ‚Üí **–ö–æ–º–ø–∞–Ω–∏—è** ‚Üí **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π**
- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ ‚Üí –û–ø–ª–∞—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ–π

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–°–º. —Ñ–∞–π–ª: `docs/YOOKASSA_SELF_EMPLOYED_SETUP.md`

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `test_`
- –î–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –Ω—É–∂–Ω—ã –∫–ª—é—á–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `live_`
- –ë–æ–µ–≤—ã–µ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- Webhook –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS

## üîß –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs -f app

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker-compose exec app env | grep YOOKASSA
```

---

**–ì–æ—Ç–æ–≤–æ!** üéâ

