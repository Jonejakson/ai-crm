# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê –î–ï–ü–õ–û–Ø - –ù–ê–í–°–ï–ì–î–ê

## ‚ö†Ô∏è –ó–ê–ü–†–ï–©–ï–ù–û –ù–ê–í–°–ï–ì–î–ê:

### 1. –ö–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –£–î–ê–õ–Ø–Æ–¢ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
```bash
# ‚ùå –ù–ò–ö–û–ì–î–ê –ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
docker-compose down -v
docker volume rm postgres_data
docker-compose down --volumes
```

### 2. –ü—Ä—è–º–æ–π –¥–µ–ø–ª–æ–π –±–µ–∑ —Å–∫—Ä–∏–ø—Ç–∞:
```bash
# ‚ùå –ù–ò–ö–û–ì–î–ê –ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
docker-compose build app && docker-compose up -d app
docker-compose up -d --build
```

**–ü–æ—á–µ–º—É:** –ú–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å Docker-–æ–±—Ä–∞–∑ –∏ –∑–∞–≤–∏—Å–Ω—É—Ç—å —Å –æ—à–∏–±–∫–æ–π "No such image"

## ‚úÖ –í–°–ï–ì–î–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:

### –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd /opt/flamecrm
git pull
./scripts/safe-deploy.sh
```

**–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–Ω–µ —É–¥–∞–ª—è–µ—Ç volumes)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Å Docker-–æ–±—Ä–∞–∑–∞–º–∏
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π

## üìã –°–¢–ê–ù–î–ê–†–¢–ù–´–ô –ü–†–û–¶–ï–°–° –î–ï–ü–õ–û–Ø:

### 1. –õ–æ–∫–∞–ª—å–Ω–æ (–≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è):
```bash
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push
```

### 2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–û–î–ò–ù –†–ê–ó):
```bash
ssh selectel "cd /opt/flamecrm && git pull && ./scripts/safe-deploy.sh"
```

### 3. –ì–û–¢–û–í–û!

**–ù–ï –ó–ê–ü–£–°–ö–ê–¢–¨ –ü–û–í–¢–û–†–ù–û** - —Å–∫—Ä–∏–ø—Ç —Å–∞–º –≤—Å–µ —Å–¥–µ–ª–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

## üö® –ï–°–õ–ò –í–û–ó–ù–ò–ö–õ–ê –û–®–ò–ë–ö–ê "No such image":

**–ù–ï –ü–ê–ù–ò–ö–û–í–ê–¢–¨!** 

–°–∫—Ä–∏–ø—Ç `safe-deploy.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–∏—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–∑–∞
- ‚úÖ –ü–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ

**–ù–ï –ó–ê–ü–£–°–ö–ê–¢–¨ –ü–û–í–¢–û–†–ù–û** - —Å–∫—Ä–∏–ø—Ç —Å–∞–º –≤—Å–µ –∏—Å–ø—Ä–∞–≤–∏—Ç!

## üíæ –ë–ê–ó–ê –î–ê–ù–ù–´–•:

- **Volume:** `postgres_data` 
- **–°—Ç–∞—Ç—É—Å:** –ù–ò–ö–û–ì–î–ê –ù–ï –£–î–ê–õ–Ø–¢–¨
- **–°–æ–¥–µ—Ä–∂–∏—Ç:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ–º–ø–∞–Ω–∏–∏, —Å–¥–µ–ª–∫–∏, –∫–æ–Ω—Ç–∞–∫—Ç—ã
- **–ü—Ä–∏ –¥–µ–ø–ª–æ–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º

## ‚ö° –ì–õ–ê–í–ù–û–ï –ü–†–ê–í–ò–õ–û:

### **–û–î–ò–ù –î–ï–ü–õ–û–ô = –û–î–ò–ù –ó–ê–ü–£–°–ö safe-deploy.sh**

**–ù–ï –ó–ê–ü–£–°–ö–ê–¢–¨:**
- –ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥
- –î—Ä—É–≥–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è
- –ö–æ–º–∞–Ω–¥—ã docker-compose –Ω–∞–ø—Ä—è–º—É—é

**–í–°–ï–ì–î–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**
- –¢–æ–ª—å–∫–æ `./scripts/safe-deploy.sh`
- –û–¥–∏–Ω —Ä–∞–∑ –∑–∞ –¥–µ–ø–ª–æ–π
- –î–æ–≤–µ—Ä—è—Ç—å —Å–∫—Ä–∏–ø—Ç—É - –æ–Ω –≤—Å–µ —Å–¥–µ–ª–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üìù –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –î–ï–ü–õ–û–ï–ú:

- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã –≤ git
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `./scripts/safe-deploy.sh`
- [ ] –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `docker-compose down -v`
- [ ] –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–π `docker-compose build/up`
- [ ] –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –û–î–ò–ù –†–ê–ó

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢:

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –º–µ—Å—Ç–µ
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –í–ê–ñ–ù–û–°–¢–¨:

**–ü–†–û–î–£–ö–¢ –ù–ê –†–ï–õ–ò–ó–ï!**

**–ü–û–¢–ï–†–Ø –î–ê–ù–ù–´–• –ù–ï–î–û–ü–£–°–¢–ò–ú–ê!**

**–í–°–ï–ì–î–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –¢–û–õ–¨–ö–û safe-deploy.sh!**

---

*–≠—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º!*

