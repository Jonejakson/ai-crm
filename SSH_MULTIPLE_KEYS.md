# Использование нескольких SSH ключей на разных ПК

## ✅ Да, можно использовать несколько SSH ключей!

Вы можете создать отдельный SSH ключ для каждого компьютера и добавить их все в панель Selectel. Это удобно, если у вас есть:
- Рабочий ПК
- Домашний ПК
- Ноутбук
- Другие устройства

Каждый ключ будет работать независимо, и вы сможете подключаться к серверу с любого устройства.

---

## Создание второго SSH ключа

### На втором ПК (или на этом же, если нужно)

Откройте PowerShell и выполните:

```powershell
# Создание второго ключа с уникальным именем
ssh-keygen -t ed25519 -f "$env:USERPROFILE\.ssh\id_ed25519_pc2" -N '""' -C "flame-prod-selectel-pc2"
```

**Примечание:** 
- `id_ed25519_pc2` - это имя файла ключа (можете использовать любое имя)
- `-N '""'` - создает ключ без пароля (для удобства)
- `-C "flame-prod-selectel-pc2"` - комментарий для идентификации

### Альтернативные имена для ключей:

```powershell
# Для рабочего ПК
ssh-keygen -t ed25519 -f "$env:USERPROFILE\.ssh\id_ed25519_work" -N '""' -C "work-pc"

# Для домашнего ПК
ssh-keygen -t ed25519 -f "$env:USERPROFILE\.ssh\id_ed25519_home" -N '""' -C "home-pc"

# Для ноутбука
ssh-keygen -t ed25519 -f "$env:USERPROFILE\.ssh\id_ed25519_laptop" -N '""' -C "laptop"
```

---

## Копирование публичных ключей

### Ключ 1 (первый ПК):

```powershell
Get-Content "$env:USERPROFILE\.ssh\id_ed25519.pub" | Set-Clipboard
```

### Ключ 2 (второй ПК):

```powershell
Get-Content "$env:USERPROFILE\.ssh\id_ed25519_pc2.pub" | Set-Clipboard
```

---

## Добавление нескольких ключей в панель Selectel

1. **Откройте панель Selectel:**
   - https://panel.selectel.com
   - Войдите в аккаунт

2. **Перейдите к серверу:**
   - Нажмите на вкладку **"СЕРВЕРЫ"**
   - Выберите сервер **"flame-prod"**

3. **Добавьте первый ключ:**
   - В разделе **"SSH-keys for root user"**
   - Нажмите **"Добавить новый или выбрать существующий"**
   - Вставьте первый публичный ключ (Ctrl+V)
   - Сохраните

4. **Добавьте второй ключ:**
   - Снова нажмите **"Добавить новый или выбрать существующий"**
   - Вставьте второй публичный ключ
   - Сохраните

**Важно:** В панели Selectel можно добавить несколько SSH ключей. Все они будут работать одновременно!

---

## Подключение к серверу с разных ПК

### С первого ПК (использует ключ по умолчанию):

```bash
ssh root@79.143.30.96
```

SSH автоматически использует ключ `id_ed25519` (если он есть в папке `.ssh`).

### С первого ПК (с явным указанием ключа):

```bash
ssh -i ~/.ssh/id_ed25519 root@79.143.30.96
```

### С второго ПК (с явным указанием ключа):

```bash
ssh -i ~/.ssh/id_ed25519_pc2 root@79.143.30.96
```

### На Windows (PowerShell):

```powershell
# С явным указанием ключа
ssh -i "$env:USERPROFILE\.ssh\id_ed25519_pc2" root@79.143.30.96
```

---

## Настройка SSH config для удобства

Создайте файл `~/.ssh/config` (или `C:\Users\ВашеИмя\.ssh\config` на Windows) для автоматического выбора ключа:

### На первом ПК:

```bash
# ~/.ssh/config
Host selectel-flame
    HostName 79.143.30.96
    User root
    IdentityFile ~/.ssh/id_ed25519
    IdentitiesOnly yes
```

Теперь можно подключаться просто:
```bash
ssh selectel-flame
```

### На втором ПК:

```bash
# ~/.ssh/config
Host selectel-flame
    HostName 79.143.30.96
    User root
    IdentityFile ~/.ssh/id_ed25519_pc2
    IdentitiesOnly yes
```

---

## Просмотр всех ваших ключей

### На Windows (PowerShell):

```powershell
# Список всех публичных ключей
Get-ChildItem "$env:USERPROFILE\.ssh\*.pub"

# Просмотр содержимого всех ключей
Get-ChildItem "$env:USERPROFILE\.ssh\*.pub" | ForEach-Object {
    Write-Host "`n$($_.Name):" -ForegroundColor Cyan
    Get-Content $_.FullName
}
```

### На Linux/Mac:

```bash
# Список всех публичных ключей
ls -la ~/.ssh/*.pub

# Просмотр содержимого
cat ~/.ssh/*.pub
```

---

## Безопасность

### ✅ Рекомендации:

1. **Используйте разные ключи для разных серверов/устройств** - это безопаснее
2. **Храните приватные ключи в безопасности** - не передавайте их другим
3. **Используйте пароли для ключей** (если нужно) - при создании ключа не используйте `-N '""'`, а введите пароль
4. **Удаляйте неиспользуемые ключи** - если ключ больше не нужен, удалите его из панели Selectel

### Удаление ключа из панели Selectel:

1. Откройте панель Selectel
2. Перейдите к серверу
3. В разделе SSH-keys найдите нужный ключ
4. Удалите его

---

## Примеры использования

### Сценарий 1: Рабочий и домашний ПК

```powershell
# На рабочем ПК
ssh-keygen -t ed25519 -f "$env:USERPROFILE\.ssh\id_ed25519_work" -N '""' -C "work-pc"

# На домашнем ПК
ssh-keygen -t ed25519 -f "$env:USERPROFILE\.ssh\id_ed25519_home" -N '""' -C "home-pc"
```

Добавьте оба ключа в панель Selectel. Теперь можете подключаться с любого ПК!

### Сценарий 2: Один ключ для всех устройств

Если хотите использовать один и тот же ключ на всех устройствах:

1. Создайте ключ на первом ПК
2. Скопируйте приватный ключ (`id_ed25519`) на другие ПК
3. Добавьте публичный ключ в панель Selectel

**Внимание:** Будьте осторожны при копировании приватных ключей - это менее безопасно, чем использование отдельных ключей.

---

## Полезные команды

```powershell
# Просмотр всех ключей
Get-ChildItem "$env:USERPROFILE\.ssh\*.pub"

# Копирование конкретного ключа в буфер
Get-Content "$env:USERPROFILE\.ssh\id_ed25519_pc2.pub" | Set-Clipboard

# Проверка подключения с конкретным ключом
ssh -i "$env:USERPROFILE\.ssh\id_ed25519_pc2" -v root@79.143.30.96

# Удаление ключа (если нужно)
Remove-Item "$env:USERPROFILE\.ssh\id_ed25519_pc2"
Remove-Item "$env:USERPROFILE\.ssh\id_ed25519_pc2.pub"
```

---

## Итог

✅ **Да, можно использовать несколько SSH ключей на разных ПК**

- Создайте отдельный ключ для каждого ПК
- Добавьте все публичные ключи в панель Selectel
- Каждый ключ будет работать независимо
- Это безопаснее и удобнее, чем копирование одного ключа


